Part 3. æ‹¡å¼µã‚’å…¬é–‹ã—ã‚ˆã†
============================================================

.. _Marketplace: https://marketplace.visualstudio.com/vscode

`Marketplace`_ ã¸å…¬é–‹ï¼
--------------------------------------------------

1. ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦å…¬é–‹
2. ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§æ“ä½œã—ã¦å…¬é–‹

3-1 ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦å…¬é–‹
============================================================

* Visual Studio Marketplace publisher management page
* :command:`vsce` ã‚³ãƒãƒ³ãƒ‰

Visual Studio Marketplace publisher management page
============================================================

* https://marketplace.visualstudio.com/manage
* ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³ï¼ˆGitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯æœªæ¤œè¨¼ï¼‰
* Create publisherï¼ˆpublisherã‚’ä½œã‚‹ï¼‰

Nameã ã‘å…¥åŠ›ã™ã‚Œã°publisherã¯ä½œã‚Œã‚‹
--------------------------------------------------

.. figure:: ../_static/vscodeconjp/01extension-create-publisher.png

:command:`vsce` ã‚³ãƒãƒ³ãƒ‰
============================================================

:command:`npm install @vscode/vsce`

https://code.visualstudio.com/api/working-with-extensions/publishing-extension#installation

:file:`package.json` ã‚’ç·¨é›†
--------------------------------------------------

.. code-block:: json

    {
      // nameã¯Marketplaceã§ä¸€æ„ã«ãªã‚‹ã‚ˆã†ã«å¤‰ãˆã‚‹ã®ãŒã‚ªã‚¹ã‚¹ãƒ¡ï¼ˆãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®ã¾ã¾ã ã¨ã‹ã¶ã£ã¦ã—ã¾ã†ï¼‰
      "name": "tokimeki-editing",
      // publisher management pageã§ä½œã£ãŸpublisherã®IDã‚’æ›¸ã
      "publisher": "everlasting-diary",
      // ... çœç•¥ ....
    }

:command:`vsce package`
--------------------------------------------------

* æ‹¡å¼µã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ ``vsix`` ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã‚ã‚‹

  * :file:`tokimeki-editing-0.0.1.vsix` ğŸ™Œ

* Yeomanã§scaffoldã—ãŸ :file:`README.md` ã®ã¾ã¾ã ã¨packageã§ã‚¨ãƒ©ãƒ¼ã€‚ç·¨é›†ã™ã‚‹ï¼ˆå†…å®¹ã‚’å‰Šã£ãŸï¼‰

.. _Visual Studio Marketplace publisher management page: https://marketplace.visualstudio.com/manage

ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
============================================================

* `Visual Studio Marketplace publisher management page`_ ã‚’æ“ä½œ
* publisherã«vsixãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

  * `ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã€ŒPublish an extensionã€ <https://code.visualstudio.com/api/working-with-extensions/publishing-extension#publish-an-extension>`__ ã«ç”»åƒã‚ã‚Š

`Marketplace`_ ã«å…¬é–‹ğŸ™Œ
--------------------------------------------------

* ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¾Œã€verifyã•ã‚Œã‚‹ãŸã‚å°‘ã—ã ã‘å¾…ã¤

  * ãƒ‘ã‚¹ã—ãŸã‚‰ãƒ¡ãƒ¼ãƒ«ãŒæ¥ãŸ

* å…¬é–‹å¾Œã€æ‹¡å¼µã‚’å³ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€éå…¬é–‹ã«ã‚‚åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹

3-2 ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§æ“ä½œã—ã¦å…¬é–‹
============================================================

.. code-block:: sh

    vsce package
    vsce login <publisher name>
    vsce publish

:command:`vsce login` ã«ã¯ãƒˆãƒ¼ã‚¯ãƒ³ãŒå¿…è¦
--------------------------------------------------

.. code-block:: sh

    $ vsce login everlasting-diary
    Personal Access Token for publisher 'everlasting-diary':

Personal Access Tokenä½œæˆ
============================================================

1. Azure DevOpsã®çµ„ç¹”ï¼ˆorganizationï¼‰ã‚’ä½œã‚‹
2. Azure DevOpsã®çµ„ç¹”ã§Personal Access Tokenã‚’ä½œã‚‹

Azure DevOpsã®çµ„ç¹”ã‚’ä½œã‚‹
--------------------------------------------------

* https://go.microsoft.com/fwlink/?LinkId=307137 ã‹ã‚‰ã‚µã‚¤ãƒ³ã‚¤ãƒ³

  * Visual Studio Marketplace publisher management pageã¨åŒã˜ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

* çµ„ç¹”ï¼ˆorganizationï¼‰ã ã‘ã‚’ä½œã‚‹
* ç”»åƒã¤ãã®æ‰‹é †ï¼š `çµ„ç¹”ã®ä½œæˆ <https://learn.microsoft.com/ja-jp/azure/devops/organizations/accounts/create-organization?view=azure-devops>`_

Azure DevOpsã®çµ„ç¹”ã§Personal Access Tokenã‚’ä½œã‚‹
------------------------------------------------------------

.. figure:: ../_static/vscodeconjp/01extension-azure-devops-create-token.png

User settingsï¼ˆå³ä¸Šã®ã‚¢ã‚¤ã‚³ãƒ³ï¼‰ > Personal access tokens

Personal Access Tokenä½œæˆæ™‚ã®å¿…é ˆé …ç›®
------------------------------------------------------------

:Name: ãƒˆãƒ¼ã‚¯ãƒ³ã®åå‰
:Organization: everlasting-diary
:Scopes: Marketplaceã®Manageã ã‘

`ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã€ŒGet a Personal Access Tokenã€ <https://code.visualstudio.com/api/working-with-extensions/publishing-extension#get-a-personal-access-token>`__ ã«ç”»åƒã‚ã‚Š

æ§ãˆãŸãƒˆãƒ¼ã‚¯ãƒ³ã§ :command:`vsce login` ãŒé€šã‚Šã¾ã™
------------------------------------------------------------

.. code-block:: sh

    vsce package
    vsce login <publisher name>
    vsce publish

ğŸŒ¯Part 3. æ‹¡å¼µã‚’å…¬é–‹ã—ã‚ˆã† ã¾ã¨ã‚
============================================================

* ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦Marketplaceã«å…¬é–‹ï¼šåˆã‚ã¦ã®æ–¹ğŸ”°ã«ã‚ªã‚¹ã‚¹ãƒ¡

  * publisher management pageã®æ“ä½œ & :command:`vsce` ã‚³ãƒãƒ³ãƒ‰

* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§æ“ä½œã—ã¦å…¬é–‹ï¼šæ…£ã‚Œã¦ããŸã‚‰ã“ã¡ã‚‰ã‚’

  * Azure DevOpsã§Personal Access Tokenã‚’ä½œã‚‹

ã“ã®å…ˆï¼šæ¥½ã«ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ãŸã‚ã« ğŸƒâ€â™‚ï¸
--------------------------------------------------

* GitHub Actionsãªã©CIãƒ„ãƒ¼ãƒ«ä¸Šã§ã€Marketplaceã«å…¬é–‹ã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
* ğŸ‘‰ `Continuous Integration <https://code.visualstudio.com/api/working-with-extensions/continuous-integration>`__

é–¢é€£ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ ğŸƒâ€â™‚ï¸
--------------------------------------------------

* `æ–°ã—ã„æ¦‚å¿µã‚’æœ€å°é™ã«ã—ã¦ã€è‡ªä½œVS Codeæ‹¡å¼µã‚’Marketplaceã«å…¬é–‹ã™ã‚‹ <https://nikkie-ftnext.hatenablog.com/entry/publish-vscode-extensions-with-minimum-new-concepts>`__
* `vsceã‚³ãƒãƒ³ãƒ‰ã§ã€è‡ªä½œVS Codeæ‹¡å¼µã‚’Marketplaceã«å…¬é–‹ã™ã‚‹ <https://nikkie-ftnext.hatenablog.com/entry/publish-vscode-extensions-using-vsce-command-well>`__
