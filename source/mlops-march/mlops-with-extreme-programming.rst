============================================================
XPで取り組むMLOps
============================================================

XP（エクストリームプログラミング）

2023/03/09 第29回MLOps勉強会 nikkie

イントロダクション
============================================================

* 自己紹介
* 開発チーム紹介
* XP紹介
* おことわり

お前、誰よ
============================================================

* ふたつぎ at ユーザベース
* データサイエンティスト（2019〜）
* 自然言語処理、機械学習、テスト駆動開発、ペアプロ、たーのしー！

ユーザベースには、2つの開発チーム
============================================================

* https://tech.uzabase.com/
* BtoB向けSaaSプラットフォームの開発チーム 🙋‍♂️
* ビジネスパーソン向けメディアサービスの開発チーム

.. スクショ差し込む余地あり
.. https://hrmos.co/pages/uzabase/jobs?category=1766002544481845248

BtoB向けSaaSプラットフォームの開発チーム
--------------------------------------------------

* 1つの開発チームに4つの職種

  * 例：データサイエンティストとソフトウェアエンジニアが **同じチーム**

* 以降では「開発チーム」＝「BtoB向けSaaSプラットフォームの開発チーム」

こんなチームで働いています（異能は才能）
--------------------------------------------------

* 『`評価指標入門 <https://gihyo.jp/book/2023/978-4-297-13314-6>`__』の著者はじめ、いろんな強みを持つデータサイエンティストと働いています！
* 全社週1で知見共有： `ユーザベースのデータサイエンティストが集まる社内勉強会を振り返ります! <https://tech.uzabase.com/entry/2022/12/08/155101>`__

.. include:: what-is-xp.rst.txt

いくつか、おことわりを
============================================================

3点共有

1 "データサイエンティスト"
--------------------------------------------------

* 「自分もデータサイエンティストだけど、発表者とは職務内容がちょっと違う？」
* ここまで聞いてこういった感想、あると思います

目的は、 **事業に価値を** 提供すること
--------------------------------------------------

    機械学習、自然言語処理等の技術を利用して、ユーザベースが展開するB2B SaaSプロダクトの価値を高める （`求人ページ <https://hrmos.co/pages/uzabase/jobs/1770704536701308929>`__）

* IMO：この場に集った私たち参加者はこの目的を共有している！

お互いに学び合いましょう
--------------------------------------------------

* ポイントは **読み替え** だと思います
* 勉強会での発表を読み替えて知見を見出すの、私、大好きなんです

自分の文脈に読み替えてヒントがあったら幸いです
--------------------------------------------------

    私たちは、他者の実践の背景にどんな状況、制約があったのかを理解し、自分たちの状況、制約の下ではどのように実践するべきなのか捉え直さないといけない。

『カイゼン・ジャーニー』(Kindle の位置No.231-233)

2 機械学習システムに **ソフトウェアエンジニアリング** でアプローチ
--------------------------------------------------

SaaS事業の開発チームの現在のやり方

GoogleのRules of Machine Learningにも
--------------------------------------------------

    do machine learning like the great engineer you are, not like the great machine learning expert you aren't.

`Overview <https://developers.google.com/machine-learning/guides/rules-of-ml?hl=en#overview>`__ より

3 *小さなリリース* を積み重ねた半ばです
--------------------------------------------------

* この場で話すのは現時点の **暫定解** （日々格闘中です！）
* 小さいリリースを重ねた中での到達点であり、今後に続く小さなリリースの中で更新される

MLOps事例紹介
============================================================

* データサイエンスの課題設定
* **XP** で取り組むMLOps事例紹介（2つ）
* **目指しているもの** も紹介

SaaS事業におけるデータサイエンス
============================================================

経済情報を使ったプロダクト

* SPEEDA
* FORCAS
* INITIAL
* etc

経済情報
--------------------------------------------------

* 企業情報
* ニュース
* 業界（独自定義）
* etc etc

SaaS事業の課題設定
--------------------------------------------------

* **企業** の **業界** 推定（マルチラベル分類。こちらをメインに紹介）
* **ニュース** に **企業** 紐付け（固有表現抽出）
* etc

企業の業界推定（マルチラベル分類）
--------------------------------------------------

* 企業情報1000万社（国内・海外、上場・非上場）
* ユーザベースのアナリストが、独自定義した業界（560業界）の中から選定
* 教師あり学習して **機械学習モデルで業界推定** する

.. include:: example1-components-and-pipelines.rst.txt

閑話休題🍵 お前、誰よ（コミュニティ編）
============================================================

* 特にPythonコミュニティで にっきー（nikkie） として知られる
* Python Conference JP 2021 座長
* 最近は `毎日1エントリ <https://nikkie-ftnext.hatenablog.com/>`__ 書いてます（100日超えました🙌）

目指しているもの
============================================================

* 「XPで取り組むMLOpsでこれを実現したい！」
* 現時点のもの

再びのサークルオブライフ
--------------------------------------------------

.. figure:: https://ronjeffries.com/xprog/what-is-extreme-programming/circles.jpg

プラクティス（*習慣*）「小さなリリース」
--------------------------------------------------

* ＝小さい（ごく小規模な）リリースを **頻繁** に
* サークルオブライフでは Small Releases （赤の円の下）

リリースしやすい状況を作れている！
--------------------------------------------------

* パイプラインによりボタン1つでリリース
* リリースは開発で自由にできる。デプロイ（ユーザに届ける）はビジネス判断という切り分け

「小さなリリース」の前提条件

小さなリリース＝継続的デリバリー
--------------------------------------------------

変更するたびに本番環境にコードをリリース

(今)目指している状態： **CD4ML**
--------------------------------------------------

* `Continuous Delivery for Machine Learning <https://martinfowler.com/articles/cd4ml.html>`__
* "機械学習の継続的デリバリー"
* `Hidden Technical Debt in Machine Learning Systems <https://papers.nips.cc/paper/5656-hidden-technical-debt-in-machine-learning-systems>`_ (2015, Google) を受けて

私たちの考え
--------------------------------------------------

* 時間をかけてめちゃめちゃいいモデルを作ってデプロイは私たちはしない
* めちゃめちゃよくなくても、**ビジネス価値のあるモデル** ができ次第、デプロイ

  * その後も良くしていく（評価指標がカイゼンしたらリリース）

.. include:: example2-small-releases.rst.txt

まとめ🌯：XPで取り組むMLOps
============================================================

* ユーザベースのデータサイエンティストのMLOps事例を共有
* XPのプラクティスを実践してMLOpsしています

日々の開発
--------------------------------------------------

* XPのプラクティス：ペアプログラミング・テスト駆動開発・etc
* 基本コンポーネント・パイプライン開発

小さなリリースの反復
--------------------------------------------------

* フィードバックを頻繁に得て学びながら進みたい！
* ハイパーパラメタ探索や機械学習を使った機能開発で小さく何度もリリースした事例を共有
* (今)目指すもの：CD4ML

ご清聴ありがとうございました
--------------------------------------------------

* なにかヒントがあったらとても嬉しいです
* プラクティスは裏の考え方（原則・価値）を知ると、読み替えやすいですよ〜（XP沼へようこそ）

Appendix
============================================================

TODO: ここに参考文献リンク
